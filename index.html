<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">

    <!-- bootstrap icon -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.0/font/bootstrap-icons.css">

    <!-- my css -->
    <link rel="stylesheet" href="css/style.css">

    <title>Form ICRT</title>
</head>

<body class="bg-primary">

    <!-- awal form -->
    <div class="container-md form mb-3 bg-white">
        <div class="gambar">
            <img src="img/logo.png" alt="icrt" width="200px">
        </div>
        <div class="row text-center mb-5 judul">
            <div class="col mt-3">
                <h2>Formulir Pendaftaran Anggota ICRT 2021</h2>
            </div>
        </div>
        <div class="row justify-content-center">
            <div class="col-md-12">
                <form name="form-icrt">
                    <div class="mb-3">
                        <label for="name" class="form-label">Nama Lengkap</label>
                        <input type="text" class="form-control" id="name" name="nama">
                    </div>
                    <div class="mb-3">
                        <label for="jurusan" class="form-label">Jurusan</label>
                        <input type="jurusan" class="form-control" id="jurusan" name="jurusan">
                    </div>
                    <div class="mb-3">
                        <label for="sekolah" class="form-label">Sekolah</label>
                        <input class="form-control" id="sekolah" rows="3" name="sekolah"></input>
                    </div>
                    <div class="mb-3">
                        <label for="alamat" class="form-label">Alamat</label>
                        <textarea class="form-control" id="alamat" rows="3" name="alamat"></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="Keahlian" class="form-label">Keahlian Pribadi</label>
                        <textarea class="form-control" id="keahlian" rows="3" name="keahlian"></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="alasan" class="form-label">Alasan Ingin Bergabung</label>
                        <textarea class="form-control" id="alasan" rows="3" name="alasan"></textarea>
                    </div>
                    <div class="mb-5">
                        <button type="submit" class="btn btn-primary btn-kirim">Kirim</button>
                    </div>
                    <button class="btn btn-primary btn-loading d-none" type="button" disabled>
                        <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                        Loading...
                    </button>
                    <div class="alert alert-primary alert-dismissible fade show d-none my-alert" role="alert">
                        <strong>Terimakasih!</strong> Formulir anda sudah kami terima. <br>
                        Silahkan Join Group WA ICRT, Dengan Link Di Bawah Ini! <br>
                        <a href="https://chat.whatsapp.com/Ium7H8PLhPGFMx9kGxdPA9">Klik Disini</a>
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!-- akhir form -->

    <!-- footer -->
    <footer class="bg-dark text-white text-center pb-5 mt-5">
        <strong>
            <p class="pt-5">Copyright &copy; 2021 by ICRT</p>
        </strong>
    </footer>
    <!-- akhir footer -->

    <script>
        const scriptURL = 'https://script.google.com/macros/s/AKfycbyNQVzvtWqL2EoSCfVQ3Bh70i73I23wwg-VENyCzNVxdPZvCem6Hh5gzaakDTnbSR0-/exec'
        const form = document.forms['form-icrt']
        const btnKirim = document.querySelector('.btn-kirim');
        const btnLoading = document.querySelector('.btn-loading');
        const myAlert = document.querySelector('.my-alert');

        form.addEventListener('submit', e => {
            e.preventDefault();
            // ketika tombol submit diklik
            // tampilkan tombol loading, hilangkan tombol kirim
            btnLoading.classList.toggle('d-none');
            btnKirim.classList.toggle('d-none');
            fetch(scriptURL, { method: 'POST', body: new FormData(form) })
                .then(response => {
                    // tampilkan tombol kirim, hilangkan tombol loading
                    btnLoading.classList.toggle('d-none');
                    btnKirim.classList.toggle('d-none');
                    // tampilkan alert
                    myAlert.classList.toggle('d-none');
                    // reset formnya
                    form.reset();
                    console.log('Success!', response)

                })
                .catch(error => console.error('Error!', error.message))
        })
    </script>

    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ"
        crossorigin="anonymous"></script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js" integrity="sha384-W8fXfP3gkOKtndU4JGtKDvXbO53Wy8SZCQHczT5FMiiqmQfUpWbYdTil/SxwZgAN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.min.js" integrity="sha384-skAcpIdS7UcVUC05LJ9Dxay8AXcDYfBJqt1CJ85S/CFujBsIzCIv+l9liuYLaMQ/" crossorigin="anonymous"></script>
    -->
</body>

</html>